function DisplayAngelCards(n){var t={AngelsList:n};$.ajax({dataType:"html",type:"POST",url:"/Team/GetAngelCardRows",data:t,success:function(n){$("#loader").hide();$("#angelsContainer").html(n);$(".angel-card").each(function(){var n=$(this),t=n.data("lastbattleresult").toString(),i=determineBattleResults(t);i&&n.parent().find("#award").show()});$(".battleResultsAngel").on("click",function(n){var t,u,i,r,f;n.stopImmediatePropagation();n.preventDefault();t=$(this).parents(".angel-card");u=t.data("lastbattleresult").toString();determineBattleResults(u);isWin?($("#modalResultsTitle").text("Last Battle Results - "+arena),$("#resultText").text("Won!"),i="",i=isWildCommonPet?arena==="Menacing Nimbus Forest"?" and it has become part of your team! You've also gained +4 EXP":" and it has become part of your team! You've also gained +2 EXP":arena==="Menacing Nimbus Forest"?"! You've gained +4 EXP":arena==="Thunderdome"?"! You've gained +7 EXP":"! You've gained +2 EXP",$("#foughtAgainstText").text("You defeated "+monster+i)):monster!==""?($("#modalResultsTitle").text("Last Battle Results - "+arena),$("#resultText").text("You lost--you shall regain honor. You've gained +1 EXP"),$("#foughtAgainstText").text("You were defeated by "+monster+", train harder or try different accessories. You've gained +1 EXP. Having trouble winning, get a stronger angel!")):($("#modalResultsTitle").text("Last Battle Results"),$("#resultText").text("You must first begin a battle."),$("#foughtAgainstText").text("Train your pets to build their aura levels, and start battling to increase the experience level of your angels."));r=t.data("lastbattletime");r>0?(f=getDateTimeFromUnixTimestamp(r),$("#lastBattleTime").text("Last Battled: "+f),$("#lastBattleTime").show()):$("#lastBattleTime").hide();$("#opponentImage").attr("src",monsterImageSrc);$("#modalAngelStats").modal("show")});$(".manageCardAngel").on("click",function(n){n.stopImmediatePropagation();n.preventDefault();var t=$(this).parents(".angel-card");resetManageCardModalToOriginal();modalManageCardType="angel";modalManageCardId=t.data("cardid");$("#renamePet").hide();$("#modalManageCard").modal("show")})},failure:function(){$("#loader").hide();$("#warnNoCardsFound").show()}})}function DisplayPetCards(n){for(var r,u,i=96,t=0;t<n.length;t+=i)r=n.slice(t,t+i),u={PetsList:r},$.ajax({dataType:"html",type:"POST",url:"/Team/GetPetCardRows",data:u,success:function(n){$("#loader").hide();$("#petsContainer").append(n);$(".manageCardPet").on("click",function(n){n.stopImmediatePropagation();n.preventDefault();var t=$(this).parents(".pet-card");resetManageCardModalToOriginal();modalManageCardType="pet";modalManageCardId=t.data("cardid");$("#renamePet").show();$("#modalManageCard").modal("show")})},failure:function(){$("#loader").hide();$("#warnNoCardsFound").show()}})}function DisplayAccessoryCards(n){var t={AccessoriesList:n};$.ajax({dataType:"html",type:"POST",url:"/Team/GetAccessoryCardRows",data:t,success:function(n){$("#loader").hide();$("#accessoriesContainer").html(n);$(".manageCardAccessory").on("click",function(n){n.stopImmediatePropagation();n.preventDefault();var t=$(this).parents(".accessory-card");resetManageCardModalToOriginal();modalManageCardType="acc";modalManageCardId=t.data("cardid");$("#renamePet").hide();$("#modalManageCard").modal("show")})},failure:function(){$("#loader").hide();$("#warnNoCardsFound").show()}})}function isEtherAccountActive(){return account!==null&&account!==undefined}$(document).ready(function(){var n=document.getElementById("scene"),t=new Parallax(n,{relativeInput:!0});t.friction(.2,.2);setupManageCardModel()});var rpcConnected=null,account=undefined,angelDict=[],petDict=[],accessoryDict=[],modalManageCardType="",modalManageCardId="";window.addEventListener("load",function(){if(typeof web3!="undefined"){window.web3=new Web3(web3.currentProvider);(web3.eth.accounts[0]||null)!==account&&(account=web3.eth.accounts[0]||null,account?web3.eth.defaultAccount=account:setTimeout(function(){showMetaMaskAlertNotLoggedIn()},5e3),console.log("INFO_LOG|update_account_info|account="+account));var n=setInterval(function(){(web3.eth.accounts[0]||null)!==account&&(account=web3.eth.accounts[0]||null,account,location.reload(),console.log("INFO_LOG|update_account_info|account="+account))},500);web3.version.getNetwork((n,t)=>{switch(t){case"1":console.log("INFO_LOG|running_on_main_net.");break;case"2":console.log("INFO_LOG|running_on_deprecatedmorden_test_network.");showMetaMaskAlertWrongNetwork();break;case"3":console.log("INFO_LOG|running_on_ropsten_test_network.");showMetaMaskAlertWrongNetwork();break;default:console.log("INFO_LOG|running_on_unknown_network.");showMetaMaskAlertWrongNetwork()}});rpcConnected=!0}else rpcConnected=!1,showMetaMaskAlert(),account=null;angelCardDataContractInstance=getAngelCardDataContractInstance();petCardDataContractInstance=getPetCardDataContractInstance();accessoryDataContractInstance=getAccessoryDataContractInstance();pettransferContractInstance=getPetTransferContractInstance();rpcConnected&&($("#loader").fadeIn(),getAngelByIndex(null,DisplayAngelCards),getPetByIndex(null,DisplayPetCards),getAccessoryByIndex(null,DisplayAccessoryCards))});var getDateTimeFromUnixTimestamp=function(n){var t=eval(n*1e3),i=new Date(t);return i.toLocaleString()},isWin=!1,arena="",monster="",isWildCommonPet=!1,monsterImageSrc="",determineBattleResults=function(n){var t,r,i;if(n!==undefined||n!==null)return t=n.split(""),isWin=!1,arena="",monster=0,r="",i=0,t.length===3?(i=t[0].toString(),setArena(i),r=t[1].toString()+t[2].toString(),setMonster(i,r)):t.length===2?(r=t[0].toString()+t[1].toString(),i="0",setMonster(i,r),setArena(i)):t.length===1&&(i="0",r="0"+t[0].toString(),setMonster(i,r),setArena(i)),isWin},setArena=function(n){n==="0"?(isWin=!1,arena="Wimpy Cirrus Meadows"):n==="1"?(isWin=!0,arena="Wimpy Cirrus Meadows"):n==="2"?(isWin=!1,arena="Menacing Nimbus Forest"):n==="3"?(isWin=!0,arena="Menacing Nimbus Forest"):n==="4"?(isWin=!1,arena="Thunderdome"):n==="5"&&(isWin=!0,arena="Thunderdome")},setMonster=function(n,t){isWildCommonPet=!1;monsterImageSrc="";n==="0"||n==="1"?t==="01"?(monster="Lunkus",monsterImageSrc="images/Monsters/Lunkus.svg"):t==="02"?(monster="Cornu",monsterImageSrc="images/Monsters/Cornu.svg"):t==="03"?(monster="Colo-Colo",monsterImageSrc="images/Monsters/Colo.svg"):t==="04"?(monster="a Nix",monsterImageSrc="images/Monsters/Nix.svg"):t==="05"?(monster="a Komodo",monsterImageSrc="images/Pets/WildCommonPets/KomodoLarge.svg",isWildCommonPet=!0):t==="06"?(monster="a Falcon",monsterImageSrc="images/Pets/WildCommonPets/FalconLarge.svg",isWildCommonPet=!0):t==="07"?(monster="a Bobcat",monsterImageSrc="images/Pets/WildCommonPets/BobcatLarge.svg",isWildCommonPet=!0):t==="08"&&(monster="a Unicorn",monsterImageSrc="images/Pets/WildCommonPets/UnicornLarge.svg",isWildCommonPet=!0):n==="2"||n==="3"?t==="01"?(monster="a Foawr",monsterImageSrc="images/Monsters/Foawr.svg"):t==="02"?(monster="a Moko",monsterImageSrc="images/Monsters/Moko.svg"):t==="03"?(monster="a Pamba",monsterImageSrc="images/Monsters/Pamba.svg"):t==="04"?(monster="a Biersal",monsterImageSrc="images/Monsters/Biersal.svg"):t==="05"?(monster="a Rock Dragon",monsterImageSrc="images/Pets/RockDragonLarge.svg",isWildCommonPet=!0):t==="06"?(monster="a Archaeopteryx",monsterImageSrc="images/Pets/ArchaeopteryxLarge.svg",isWildCommonPet=!0):t==="07"?(monster="a Sabortooth",monsterImageSrc="images/Pets/SabortoothLarge.svg",isWildCommonPet=!0):t==="08"&&(monster="a Pegasus",monsterImageSrc="images/Pets/PegasusLarge.svg",isWildCommonPet=!0):(n==="4"||n==="5")&&(t==="01"?(monster="a Fire Elemental",monsterImageSrc="images/Pets/FireElemental.svg"):t==="02"?(monster="a Water Elemental",monsterImageSrc="images/Pets/WaterElemental.svg"):t==="03"?(monster="a Sun Elemental",monsterImageSrc="images/Pets/SunElemental.svg"):t==="04"?(monster="a Naughty Nix",monsterImageSrc="images/Monsters/NaughtyNix.svg"):t==="05"?(monster="a Great Foawr",monsterImageSrc="images/Monsters/GreatFoawr.svg"):t==="06"?(monster="a Dire Moko",monsterImageSrc="images/Monsters/DireMoko.svg"):t==="07"?(monster="a Lunkus Captain",monsterImageSrc="images/Monsters/LunkusCaptain.svg"):t==="08"&&(monster="a Dire Cornu",monsterImageSrc="images/Monsters/DireCornu.svg"))};var resetManageCardModalToOriginal=function(){modalManageCardType="";modalManageCardId="";$("#manageCardButtons").show();$("#renamePet").hide();$("#cannotUndoWarn").show();$("#transactionSentWarn").hide();$("#transferCardContainer").hide();$("#typeTransferInputContainer").show();$("#transferCardConfirm").hide();$("#addressToInput").val("");$("#typeTransferInput").val("");$("#deleteCardContainer").hide();$("#typeDeleteInputContainer").show();$("#deleteCardConfirm").hide();$("#typeDeleteInput").val("");$("#renamePetCardContainer").hide();$("#renamePetInput").val("")},setupManageCardModel=function(){$("#transferCard").on("click",function(n){n.stopImmediatePropagation();n.preventDefault();$("#manageCardButtons").hide();$("#transferCardContainer").fadeIn(200);$("#typeTransferInput").keyup(function(){this.value==="transfer"&&$("#typeTransferInputContainer").hide(function(){$("#transferCardConfirm").fadeIn(200)})});$("#addressToInput").keyup(function(){$("#addressToInputContainer").removeClass("bg-danger")})});$("#transferCardConfirm").on("click",function(n){n.stopImmediatePropagation();n.preventDefault();var t=$('[name="addressToInput"]').val();t!==""&&web3.isAddress(t)?($("#addressToInputContainer").removeClass("bg-danger"),transferCard(modalManageCardType,modalManageCardId,t)):$("#addressToInputContainer").addClass("bg-danger")});$("#deleteCard").on("click",function(n){n.stopImmediatePropagation();n.preventDefault();$("#manageCardButtons").hide();$("#deleteCardContainer").fadeIn(200);$("#typeDeleteInput").keyup(function(){this.value==="delete"&&$("#typeDeleteInputContainer").hide(function(){$("#deleteCardConfirm").fadeIn(200)})})});$("#deleteCardConfirm").on("click",function(n){n.stopImmediatePropagation();n.preventDefault();transferCard(modalManageCardType,modalManageCardId,"0x0")});$("#renamePet").on("click",function(n){n.stopImmediatePropagation();n.preventDefault();$("#manageCardButtons").hide();$("#renamePetCardContainer").fadeIn(200);$("#renamePetInput").keyup(function(){$("#renamePetInputContainer").removeClass("bg-danger")})});$("#renamePetCardConfirm").on("click",function(n){n.stopImmediatePropagation();n.preventDefault();var t=$('[name="renamePetInput"]').val();t===""?$("#renamePetInputContainer").addClass("bg-danger"):($("#renamePetInputContainer").removeClass("bg-danger"),setPetName(t,modalManageCardId))})},getOwnerAngelCount=function(n,t){if(!web3.isAddress(n)){console.log("invalid_address|address="+n);return}angelCardDataContractInstance.getOwnerAngelCount(n,function(n,i){if(n)console.log("ERROR_LOG|getAngelCardSeries_txn_fail|error="+n);else{var r=i.toNumber();r>0&&(r=Number(r));console.log("INFO_LOG|getOwnerAngelCount|value="+r);t({value:r})}})},getAngelByIndex=function(n,t){function i(n){function f(){u===r&&t(angelDict)}var r=n.value,u=0,i;if(r>0)for(i=0;i<r;i++)angelCardDataContractInstance.getAngelByIndex(account,i,function(n,t){if(n)console.log("ERROR_LOG|getAngelByIndex_txn_fail|error="+n);else{var i=Number(t);console.log("INFO_LOG|getOwnerAngelCount|value="+i);angelCardDataContractInstance.getAngel(i,function(n,t){if(n)console.log("ERROR_LOG|getAngel_txn_fail|error="+n);else{u+=1;var e=t[0].toNumber(),o=t[1].toNumber(),s=t[2].toNumber(),h=t[3].toNumber(),c=t[4].toNumber(),i=t[5].toNumber();i>0&&(i=Number(web3.fromWei(i,"ether")));var l=t[6].toString(),a=t[7].toString(),v=t[8].toString(),y=t[9].toNumber(),r=t[10].toString();r===account&&angelDict.push({angelId:e,angelCardSeriesId:o,battlePower:s,aura:h,experience:c,price:i,createdTime:l,lastBattleTime:a,lastVsBattleTime:v,lastBattleResult:y,owner:r});f()}})}});else $("#loader").hide(),$("#warnNoCardsFound").fadeIn()}getOwnerAngelCount(account,i)},getOwnerPetCount=function(n,t){if(!web3.isAddress(n)){console.log("invalid_address|address="+n);return}petCardDataContractInstance.getOwnerPetCount(n,function(n,i){if(n)console.log("ERROR_LOG|getOwnerPetCount_txn_fail|error="+n);else{var r=i.toNumber();r>0&&(r=Number(r));console.log("INFO_LOG|getOwnerPetCount|value="+r);t({value:r})}})},getPetByIndex=function(n,t){function i(n){function f(){u===r&&t(petDict)}for(var r=n.value,u=0,i=0;i<r;i++)petCardDataContractInstance.getPetByIndex(account,i,function(n,t){if(n)console.log("ERROR_LOG|getPetByIndex_txn_fail|error="+n);else{var i=Number(t);console.log("INFO_LOG|getOwnerPetCount|value="+i);petCardDataContractInstance.getPet(i,function(n,t){if(n)console.log("ERROR_LOG|getPet_txn_fail|error="+n);else{u+=1;var r=t[0].toNumber(),e=t[1].toNumber(),o=t[2].toString(),s=t[3].toNumber(),h=t[4].toNumber(),c=t[5].toNumber(),l=t[6].toNumber(),a=t[7].toString(),v=t[8].toString(),i=t[9].toString();i===account&&petDict.push({petId:r,petCardSeriesId:e,name:o,luck:s,auraRed:h,auraBlue:c,auraYellow:l,lastTrainingTime:a,lastBreedingTime:v,owner:i});f()}})}})}getOwnerPetCount(account,i)},getOwnerAccessoryCount=function(n,t){if(!web3.isAddress(n)){console.log("invalid_address|address="+n);return}accessoryDataContractInstance.getOwnerAccessoryCount(n,function(n,i){if(n)console.log("ERROR_LOG|getOwnerAccessoryCount_txn_fail|error="+n);else{var r=i.toNumber();r>0&&(r=Number(r));console.log("INFO_LOG|getOwnerAccessoryCount|value="+r);t({value:r})}})},getAccessoryByIndex=function(n,t){function i(n){function f(){u===r&&t(accessoryDict)}for(var r=n.value,u=0,i=0;i<r;i++)accessoryDataContractInstance.getAccessoryByIndex(account,i,function(n,t){if(n)console.log("ERROR_LOG|getAccessoryByIndex_txn_fail|error="+n);else{var i=Number(t);console.log("INFO_LOG|getOwnerAccessoryCount|value="+i);accessoryDataContractInstance.getAccessory(i,function(n,t){if(n)console.log("ERROR_LOG|getAccessory_txn_fail|error="+n);else{u+=1;var r=t[0].toNumber(),e=t[1].toNumber(),i=t[2].toString();i===account&&accessoryDict.push({accessoryId:r,accessorySeriesId:e,owner:i});f()}})}})}getOwnerAccessoryCount(account,i)},transferCard=function(n,t,i){n==="angel"?angelCardDataContractInstance.ownerAngelTransfer(i,t,{gas:25e4},function(n){n?console.log("ERROR_LOG|ownerAngelTransfer_txn_fail|error="+n):$("#transferCardContainer").hide(function(){$("#deleteCardContainer").hide();$("#cannotUndoWarn").hide();$("#renamePetCardContainer").hide();$("#transactionSentWarn").fadeIn(200)})}):n==="pet"?pettransferContractInstance.ownerPetTransfer(t,i,{gas:25e4},function(n){n?console.log("ERROR_LOG|ownerPetTransfer_txn_fail|error="+n):$("#transferCardContainer").hide(function(){$("#deleteCardContainer").hide();$("#cannotUndoWarn").hide();$("#renamePetCardContainer").hide();$("#transactionSentWarn").fadeIn(200)})}):n==="acc"&&accessoryDataContractInstance.ownerAccessoryTransfer(i,t,function(n){n?console.log("ERROR_LOG|ownerAccessoryTransfer_txn_fail|error="+n):$("#transferCardContainer").hide(function(){$("#deleteCardContainer").hide();$("#cannotUndoWarn").hide();$("#renamePetCardContainer").hide();$("#transactionSentWarn").fadeIn(200)})})},setPetName=function(n,t){petCardDataContractInstance.setPetName(n,t,{gas:25e4},function(n){n?console.log("ERROR_LOG|getPetByIndex_txn_fail|error="+n):$("#transferCardContainer").hide(function(){$("#deleteCardContainer").hide();$("#cannotUndoWarn").hide();$("#renamePetCardContainer").hide();$("#transactionSentWarn").fadeIn(200)})})},uniqueList=[],duplicateList=[],GetUniqueAndDuplicateCardsLists=function(n,t){var u,i,r,f;for(uniqueList=[],duplicateList=[],u={},f=0;f<t.length;f++)i=t[f],n==="angel"?r=u[i.angelCardSeriesId]:n==="pet"?r=u[i.petCardSeriesId]:n==="acc"&&(r=u[i.accessoryCardSeriesId]),r?duplicateList.push(r):(n==="angel"?u[i.angelCardSeriesId]=r={angelCardSeriesId:i.angelCardSeriesId}:n==="pet"?u[i.petCardSeriesId]=r={petCardSeriesId:i.petCardSeriesId}:n==="acc"&&(u[i.accessorySeriesId]=r={accessorySeriesId:i.accessorySeriesId}),uniqueList.push(r));console.log(uniqueList);console.log(duplicateList)},GetUniqueValuesFromList=function(n){var t=[],i;n==="angel"?t=angelDict:n==="pet"?t=petDict:n==="acc"&&(t=accessoryDict);i=$.grep(t,function(n){return $.inArray(n,uniqueList)<0});console.log(i)};