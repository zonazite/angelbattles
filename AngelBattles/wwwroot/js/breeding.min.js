function DisplayPetCards(n){for(var r,u,i=96,t=0;t<n.length;t+=i)r=n.slice(t,t+i),u={PetsList:r},$.ajax({dataType:"html",type:"POST",url:"/Breeding/GetPetCardRows",data:u,success:function(n){$("#loader").hide();$("#petWindowContainer").fadeIn();$("#petsContainer").append(n);$("#petsContainer").fadeIn();$(".pet-breeding-card").length===0?$("#warnNoCardsFound").show():$(".pet-breeding-card").length===1&&$("#warnNeedOneMorePetCard").show();$(".pet-breeding-card").not(".in-breeding").each(function(){var n=$(this).data("petid"),t=Cookies.get("petBreeding:"+n.toString());t==="pending"&&($(this).find("#inBreedingWarn").show(),$(this).find("#petAura").hide(),$(this).removeClass("hand-cursor").addClass("no-pointers-events"))});$(".pet-breeding-card.in-breeding").each(function(){var n=$(this).data("petid"),t=Cookies.get("petBreeding:"+n);t==="pending"&&Cookies.remove("petBreeding:"+n.toString())});$(".pet-breeding-card").on("click",function(n){n.stopImmediatePropagation();n.preventDefault();var t=$(this),i=getCardSeriesImageSrc("pet",t.data("petcardseriesid").toString());return $("#choosePetOneText").is(":visible")?($("#choosePetOne").hide(),$("#petOneImage").attr("src",i),$("#petOneToBreed").fadeIn(200),$("#petOneToBreed").attr("data-petoneid",t.data("petid")),$("#petTwoImage").is(":visible")||($("#choosePetTwoText").fadeIn(),$(".pet-breeding-card").length===1&&$("#warnNeedOneMorePetCard").show())):$("#choosePetTwoText").is(":visible")&&($("#choosePetTwo").hide(),$("#petTwoImage").attr("src",i),$("#petTwoToBreed").fadeIn(200),$("#petTwoToBreed").attr("data-pettwoid",t.data("petid")),$("#petsContainer").fadeOut(),$("#beginBreeding").fadeIn()),t.fadeOut(),!1});loadEachPetRestEndTime()},failure:function(){$("#loader").hide();$("#warnNoCardsFoundPet").show()}})}function isEtherAccountActive(){return account!==null&&account!==undefined}var loadEachPetRestEndTime;$(document).ready(function(){var n=document.getElementById("scene"),t=new Parallax(n,{relativeInput:!0});t.friction(.2,.2);$("#petNameInput").keyup(function(){$("#petNameContainer").removeClass("bg-danger")});$("#beginBreedingButton").click(function(){if(isEtherAccountActive()){var n=$('[name="petNameInput"]').val();n===""?$("#petNameContainer").addClass("bg-danger"):($("#petNameContainer").removeClass("bg-danger"),breed())}else showMetaMaskAlertNotLoggedIn()});$("#keepBreeding").click(function(){setTimeout(function(){location.reload()},100)})});var rpcConnected=null,account=undefined,petDict=[];window.addEventListener("load",function(){if(typeof web3!="undefined"){window.web3=new Web3(web3.currentProvider);(web3.eth.accounts[0]||null)!==account&&(account=web3.eth.accounts[0]||null,account?web3.eth.defaultAccount=account:setTimeout(function(){showMetaMaskAlertNotLoggedIn()},5e3),console.log("INFO_LOG|update_account_info|account="+account));var n=setInterval(function(){(web3.eth.accounts[0]||null)!==account&&(account=web3.eth.accounts[0]||null,account,location.reload(),console.log("INFO_LOG|update_account_info|account="+account))},500);web3.version.getNetwork((n,t)=>{switch(t){case"1":console.log("INFO_LOG|running_on_main_net.");break;case"2":console.log("INFO_LOG|running_on_deprecatedmorden_test_network.");showMetaMaskAlertWrongNetwork();break;case"3":console.log("INFO_LOG|running_on_ropsten_test_network.");showMetaMaskAlertWrongNetwork();break;default:console.log("INFO_LOG|running_on_unknown_network.");showMetaMaskAlertWrongNetwork()}});rpcConnected=!0}else rpcConnected=!1,showMetaMaskAlert(),account=null;petCardDataContractInstance=getPetCardDataContractInstance();breedingStableContractInstance=getBreedingStableContractInstance();rpcConnected&&($("#loader").fadeIn(),getPetByIndex(null,DisplayPetCards))});loadEachPetRestEndTime=function(){$(".petRestingTime").each(function(){var t=$(this),i=t.data("endtime"),n;i!==""&&(n=new Date(parseInt(i)*1e3),n.setHours(n.getHours()+2),n.setDate(n.getDate()+7),t.countdown(n,function(n){t.html(n.strftime("%D days %H hours %M minutes %S seconds"))}))})};var getOwnerPetCount=function(n,t){if(!web3.isAddress(n)){console.log("invalid_address|address="+n);return}petCardDataContractInstance.getOwnerPetCount(n,function(n,i){if(n)console.log("ERROR_LOG|getOwnerPetCount_txn_fail|error="+n);else{var r=i.toNumber();r>0&&(r=Number(r));console.log("INFO_LOG|getOwnerPetCount|value="+r);t({value:r})}})},getPetByIndex=function(n,t){function i(n){function f(){u===i&&t(petDict)}var i=n.value,u=0,r;if(i>=2)for(r=0;r<i;r++)petCardDataContractInstance.getPetByIndex(account,r,function(n,t){if(n)console.log("ERROR_LOG|getPetByIndex_txn_fail|error="+n);else{var i=Number(t);console.log("INFO_LOG|getOwnerPetCount|value="+i);petCardDataContractInstance.getPet(i,function(n,t){if(n)console.log("ERROR_LOG|getPet_txn_fail|error="+n);else{u+=1;var r=t[0].toNumber(),e=t[1].toNumber(),o=t[2].toString(),s=t[3].toNumber(),h=t[4].toNumber(),c=t[5].toNumber(),l=t[6].toNumber(),a=t[7].toString(),v=t[8].toString(),i=t[9].toString();i===account&&petDict.push({petId:r,petCardSeriesId:e,name:o,luck:s,auraRed:h,auraBlue:c,auraYellow:l,lastTrainingTime:a,lastBreedingTime:v,owner:i});f()}})}});else $("#loader").hide(),i===1?$("#warnNeedOneMorePetCard").fadeIn():$("#warnNoCardsFoundPet").fadeIn()}getOwnerPetCount(account,i)},breed=function(){var i=$('[name="petNameInput"]').val(),n=$("#petOneToBreed").data("petoneid"),t=$("#petTwoToBreed").data("pettwoid");breedingStableContractInstance.Breed(n,t,i,{value:web3.toWei("0.005","ether"),gas:25e4},function(i){i?console.log("ERROR_LOG|Breed_txn_fail|error="+i):($("#breedingContainer").hide(),$("#breedingCompleted").fadeIn(),setCookie("petBreeding",n,5),setCookie("petBreeding",t,5))})};