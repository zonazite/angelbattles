function isEtherAccountActive(){return account!==null&&account!==undefined}var rpcConnected,account;$(document).ready(function(){var n=document.getElementById("scene"),t=new Parallax(n,{relativeInput:!0});t.friction(.2,.2);$("#cardsContainer .lazy").lazy({appendScroll:$("#cardsContainer")});setupButtonEvents()});rpcConnected=null;account=undefined;window.addEventListener("load",function(){if(typeof web3!="undefined"){window.web3=new Web3(web3.currentProvider);(web3.eth.accounts[0]||null)!==account&&(account=web3.eth.accounts[0]||null,account?web3.eth.defaultAccount=account:setTimeout(function(){showMetaMaskAlertNotLoggedIn()},5e3),console.log("INFO_LOG|update_account_info|account="+account));var n=setInterval(function(){(web3.eth.accounts[0]||null)!==account&&(account=web3.eth.accounts[0]||null,account,location.reload(),console.log("INFO_LOG|update_account_info|account="+account))},500);web3.version.getNetwork((n,t)=>{switch(t){case"1":console.log("INFO_LOG|running_on_main_net.");break;case"2":console.log("INFO_LOG|running_on_deprecatedmorden_test_network.");showMetaMaskAlertWrongNetwork();break;case"3":console.log("INFO_LOG|running_on_ropsten_test_network.");showMetaMaskAlertWrongNetwork();break;default:console.log("INFO_LOG|running_on_unknown_network.");showMetaMaskAlertWrongNetwork()}});rpcConnected=!0;showGetCardContainer()}else showMetaMaskAlertGetCard(),account=null;realmContractInstance=getRealmContractInstance();angelCardDataContractInstance=getAngelCardDataContractInstance();petCardDataContractInstance=getPetCardDataContractInstance();accessoryDataContractInstance=getAccessoryDataContractInstance();getCardType()==="angel"?getAngelCardSeries(setupUI):getCardType()==="pet"?getPetCardSeries(setupUI):getCardType()==="acc"&&getAccessorySeries(setupUI)});var setupButtonEvents=function(){$("#getCard").click(function(){isEtherAccountActive()?getCardType()==="angel"?createAngel():getCardType()==="pet"?createPet():getCardType()==="acc"&&createAccessory():showMetaMaskAlertNotLoggedIn()});$("#goToMyTeam").click(function(){window.location.href="/team"});$("#getPets").click(function(){$("#cardBoughtContainer").hide();$("#buyPetsContainer").show()});$("#getAnotherPet").click(function(){$("#cardBoughtContainer").hide();$("#buyPetsContainer").show()});$("#getAccessories").click(function(){$("#cardBoughtContainer").hide();$("#buyAccessoriesContainer").show()});$("#freeAngel").click(function(){$("#cardBoughtContainer").hide();$("#buyAngelsContainer").show()})},setupUI=function(n){var o=-1,s=-1,h=-1,i=0,f,c,u,r,t,e,l;getCardType()==="angel"?($("#price").text(n.basePrice.toString()+" ETH"),o=parseInt(n.currentAngelTotal.toString()),i=parseInt(n.maxAngelTotal.toString()),f=i-o,$("#totalRemaining").text(f),c=parseInt(n.baseBattlePower.toString())+10,$("#battlePower").text(n.baseBattlePower.toString()+" to "+c),$("#aura").text(getAuraString(n.baseAura.toString())),$("#angelPowerAndAura").show()):getCardType()==="pet"?($("#price").text("0 ETH"),s=parseInt(n.currentPetTotal.toString()),i=parseInt(n.maxPetTotal.toString()),u=i-s,$("#totalRemaining").text(u),r="",t=getCardSeriesId(),t>=1&&t<=4?r="10 to 19":t>=5&&t<=8?r="20 to 29":t>=9&&t<=12?r="30 to 39":t>=13&&t<=16?r="40 to 49":t>=17&&t<=19&&(r="50 to 59"),$("#luck").text(r),u>0&&$("#petNameGroup").show(),$("#petLuck").show()):getCardType()==="acc"&&($("#price").text(n.price.toString()+" ETH"),h=parseInt(n.currentTotal.toString()),i=parseInt(n.maxTotal.toString()),e=i-h,$("#totalRemaining").text(e));getCardImage();l=getCardDescription(getCardType(),getCardSeriesId())+" This card is limited in existence, only "+i+" can ever be created. Ever.";$("#description").text(l);f===0||u===0||e===0?isEtherAccountActive()&&$("#soldOut").show():$("#getCard").show()},showMetaMaskAlertGetCard=function(){$("#getCardContainer").hide();$("#modalInstallMetaMask").modal("show")},showMetaMaskAlertWrongNetwork=function(){$("#modalWrongNetwork").modal("show")},showMetaMaskAlertNotLoggedIn=function(){$("#modalMetaMaskNotLoggedIn").modal("show")},showGetCardContainer=function(){$("#getCardContainer").show()},getParameterByName=function(n,t){t||(t=window.location.href);n=n.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)"),i=r.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},getCardSeriesId=function(){return getParameterByName("seriesid")},getCardType=function(){return getParameterByName("type")},getAuraString=function(n){return n==="0"?"Blue":n==="1"?"Yellow":n==="2"?"Purple":n==="3"?"Orange":n==="4"?"Red":n==="5"?"Green":void 0},getCardImage=function(){var n=getCardSeriesId();getCardType()==="angel"?n==="0"?$("#cardImage").attr("src","images/Angels/BarakielLarge.svg"):n==="1"?$("#cardImage").attr("src","images/Angels/ZadkielLarge.svg"):n==="2"?$("#cardImage").attr("src","images/Angels/LuciferLarge.svg"):n==="3"?$("#cardImage").attr("src","images/Angels/MichaelLarge.svg"):n==="4"?$("#cardImage").attr("src","images/Angels/ArelLarge.svg"):n==="5"?$("#cardImage").attr("src","images/Angels/RaguelLarge.svg"):n==="6"?$("#cardImage").attr("src","images/Angels/LilithLarge.svg"):n==="7"?$("#cardImage").attr("src","images/Angels/FurlacLarge.svg"):n==="8"?$("#cardImage").attr("src","images/Angels/AzazelLarge.svg"):n==="9"?$("#cardImage").attr("src","images/Angels/ElelethLarge.svg"):n==="10"?$("#cardImage").attr("src","images/Angels/VerinLarge.svg"):n==="11"?$("#cardImage").attr("src","images/Angels/ZiwaLarge.svg"):n==="12"?$("#cardImage").attr("src","images/Angels/CimerielLarge.svg"):n==="13"?$("#cardImage").attr("src","images/Angels/NuminelLarge.svg"):n==="14"?$("#cardImage").attr("src","images/Angels/BatGolLarge.svg"):n==="15"?$("#cardImage").attr("src","images/Angels/GabrielLarge.svg"):n==="16"?$("#cardImage").attr("src","images/Angels/MetatronLarge.svg"):n==="17"?$("#cardImage").attr("src","images/Angels/RafaelLarge.svg"):n==="18"?$("#cardImage").attr("src","images/Angels/MelchezidekLarge.svg"):n==="19"?$("#cardImage").attr("src","images/Angels/SemyazaLarge.svg"):n==="20"?$("#cardImage").attr("src","images/Angels/AbaddonLarge.svg"):n==="21"?$("#cardImage").attr("src","images/Angels/BaalzebubLarge.svg"):n==="22"?$("#cardImage").attr("src","images/Angels/BenNezLarge.svg"):n==="23"&&$("#cardImage").attr("src","images/Angels/JophielLarge.svg"):getCardType()==="pet"?n==="1"?$("#cardImage").attr("src","images/Pets/GeckoLarge.svg"):n==="2"?$("#cardImage").attr("src","images/Pets/ParakeetLarge.svg"):n==="3"?$("#cardImage").attr("src","images/Pets/AngryKittyLarge.svg"):n==="4"&&$("#cardImage").attr("src","images/Pets/HorseLarge.svg"):getCardType()==="acc"&&(n==="1"?$("#cardImage").attr("src","images/Accessories/LeatherBracerSimple.png"):n==="2"?$("#cardImage").attr("src","images/Accessories/MetalBracersSimple.png"):n==="3"?$("#cardImage").attr("src","images/Accessories/ScholarsScrollSimple.png"):n==="4"?$("#cardImage").attr("src","images/Accessories/CosmicScrollSimple.png"):n==="5"?$("#cardImage").attr("src","images/Accessories/4LeafCloverSimple.png"):n==="6"?$("#cardImage").attr("src","images/Accessories/7LeafCloverSimple.png"):n==="7"?$("#cardImage").attr("src","images/Accessories/RedCollarSimple.png"):n==="8"?$("#cardImage").attr("src","images/Accessories/RubyCollarSimple.png"):n==="9"?$("#cardImage").attr("src","images/Accessories/YellowCollarSimple.png"):n==="10"?$("#cardImage").attr("src","images/Accessories/CitrineCollarSimple.png"):n==="11"?$("#cardImage").attr("src","images/Accessories/BlueCollarSimple.png"):n==="12"?$("#cardImage").attr("src","images/Accessories/SapphireCollarSimple.png"):n==="13"?$("#cardImage").attr("src","images/Accessories/CarrotsSimple.png"):n==="14"?$("#cardImage").attr("src","images/Accessories/CricketSimple.png"):n==="15"?$("#cardImage").attr("src","images/Accessories/BirdSeedSimple.png"):n==="16"?$("#cardImage").attr("src","images/Accessories/CatNipSimple.png"):n==="17"?$("#cardImage").attr("src","images/Accessories/LightningRodSimple.png"):n==="18"&&$("#cardImage").attr("src","images/Accessories/HolyLightSimple.png"))},showCardBought=function(){var n=getCardType();n==="angel"?(getCardSeriesId()==="0"&&($("#freeAngel").show(),$("#freeAngelTip").show()),$("#getPets").show()):n==="pet"?($("#getAccessories").show(),$("#getAnotherPet").show()):n==="acc"&&$("#goToMyTeam").show();$("#cardBoughtContainer").show();$("#getCardContainer").hide()},angelCardSeriesDict={angelCardSeriesId:0,currentAngelTotal:0,basePrice:0,maxAngelTotal:0,baseAura:0,baseBattlePower:0,lastSellTime:0,liveTime:0},petCardSeriesDict={petCardSeriesId:0,currentPetTotal:0,maxPetTotal:0},accessorySeriesDict={accessorySeriesId:0,currentTotal:0,maxTotal:0,price:0},getAngelCardSeries=function(n){angelCardDataContractInstance.getAngelCardSeries(getCardSeriesId(),function(t,i){t?(console.log("ERROR_LOG|getAngelCardSeries_txn_fail|error="+t),alert("error 1")):(angelCardSeriesDict.angelCardSeriesId=i[0].toNumber(),angelCardSeriesDict.currentAngelTotal=i[1].toNumber(),angelCardSeriesDict.basePrice=Number(web3.fromWei(i[2],"ether")),angelCardSeriesDict.maxAngelTotal=i[3].toNumber(),angelCardSeriesDict.baseAura=i[4].toNumber(),angelCardSeriesDict.baseBattlePower=i[5].toNumber(),angelCardSeriesDict.lastSellTime=i[6].toNumber(),angelCardSeriesDict.liveTime=i[7].toNumber(),n(angelCardSeriesDict))})},getPetCardSeries=function(n){petCardDataContractInstance.getPetCardSeries(getCardSeriesId(),function(t,i){t?console.log("ERROR_LOG|getAngelCardSeries_txn_fail|error="+t):(petCardSeriesDict.petCardSeriesId=i[0].toNumber(),petCardSeriesDict.currentPetTotal=i[1].toNumber(),petCardSeriesDict.maxPetTotal=i[2].toNumber(),n(petCardSeriesDict))})},getAccessorySeries=function(n){accessoryDataContractInstance.getAccessorySeries(getCardSeriesId(),function(t,i){t?console.log("ERROR_LOG|getAngelCardSeries_txn_fail|error="+t):(accessorySeriesDict.accessorySeriesId=i[0].toNumber(),accessorySeriesDict.currentTotal=i[1].toNumber(),accessorySeriesDict.maxTotal=i[2].toNumber(),accessorySeriesDict.price=Number(web3.fromWei(i[3],"ether")),n(accessorySeriesDict))})},createAngel=function(){realmContractInstance.createAngel(getCardSeriesId(),{value:web3.toWei(angelCardSeriesDict.basePrice.toString(),"ether"),gas:25e4},function(n){n?console.log("ERROR_LOG|createAngel_txn_fail|error="+n):showCardBought()})},createPet=function(){var n=$("#petName").val();realmContractInstance.createPet(getCardSeriesId(),n,{value:web3.toWei("0","ether"),gas:25e4},function(n){n?console.log("ERROR_LOG|createAngel_txn_fail|error="+n):showCardBought()})},createAccessory=function(){realmContractInstance.createAccessory(getCardSeriesId(),{value:web3.toWei(accessorySeriesDict.price.toString(),"ether"),gas:25e4},function(n){n?console.log("ERROR_LOG|createAngel_txn_fail|error="+n):showCardBought()})};